{
  "version": 3,
  "sources": ["src/app/auth/role-guard.spec.ts", "src/app/auth/role-guard.ts"],
  "sourcesContent": ["import { TestBed } from '@angular/core/testing';\r\nimport { CanActivateFn } from '@angular/router';\r\nimport { roleGuard } from './role-guard';\r\nimport { globalTestConfig } from '../../test-setup';\r\n\r\ndescribe('roleGuard', () => {\r\n  const executeGuard: CanActivateFn = (...guardParameters) => \r\n      TestBed.runInInjectionContext(() => roleGuard(...guardParameters));\r\n\r\n  beforeEach(() => {\r\n    TestBed.configureTestingModule({\r\n      providers: [...globalTestConfig.providers]\r\n    });\r\n  });\r\n\r\n  it('should be created', () => {\r\n    expect(executeGuard).toBeTruthy();\r\n  });\r\n});\r\n", "import { CanActivateFn, Router } from '@angular/router';\r\nimport { inject } from '@angular/core';\r\n\r\nexport const roleGuard: CanActivateFn = (route) => {\r\n  const router = inject(Router);\r\n  const raw = typeof window !== 'undefined' ? localStorage.getItem('currentUser') : null;\r\n  const user = raw ? JSON.parse(raw) : null;\r\n  if (!user) {\r\n    router.navigate(['/login']);\r\n    return false;\r\n  }\r\n  const expected: string[] = route.data?.['roles'] || [];\r\n  if (expected.length && !expected.includes(user.role)) {\r\n    router.navigate(['/']);\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;AAAA;;;ACAA;AACA;AAEO,IAAM,YAA2B,CAAC,UAAS;AAChD,QAAM,SAAS,OAAO,MAAM;AAC5B,QAAM,MAAM,OAAO,WAAW,cAAc,aAAa,QAAQ,aAAa,IAAI;AAClF,QAAM,OAAO,MAAM,KAAK,MAAM,GAAG,IAAI;AACrC,MAAI,CAAC,MAAM;AACT,WAAO,SAAS,CAAC,QAAQ,CAAC;AAC1B,WAAO;EACT;AACA,QAAM,WAAqB,MAAM,OAAO,OAAO,KAAK,CAAA;AACpD,MAAI,SAAS,UAAU,CAAC,SAAS,SAAS,KAAK,IAAI,GAAG;AACpD,WAAO,SAAS,CAAC,GAAG,CAAC;AACrB,WAAO;EACT;AACA,SAAO;AACT;;;ADdA;AAEA,SAAS,aAAa,MAAK;AACzB,QAAM,eAA8B,IAAI,oBACpC,QAAQ,sBAAsB,MAAM,UAAU,GAAG,eAAe,CAAC;AAErE,aAAW,MAAK;AACd,YAAQ,uBAAuB;MAC7B,WAAW,CAAC,GAAG,iBAAiB,SAAS;KAC1C;EACH,CAAC;AAED,KAAG,qBAAqB,MAAK;AAC3B,WAAO,YAAY,EAAE,WAAU;EACjC,CAAC;AACH,CAAC;",
  "names": []
}
